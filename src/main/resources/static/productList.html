<!DOCTYPE html>
<html lang="en">

<head>
    <title>productList</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
    <link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css"><!-- 图标样式 -->
    <link rel="stylesheet" type="text/css" href="./css/goodDetail.css">
    <link href="css/owl.carousel.css" rel="stylesheet" type="text/css" media="all">

    <script src="js/jquery-2.2.3.min.js"></script>
    <script src="js/jquery-scrolltofixed-min.js" type="text/javascript"></script><!-- 导航栏 -->
    <script type="text/javascript" src="js/move-top.js"></script>
    <script type="text/javascript" src="js/easing.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/main.js"></script>
    <script src="js/owl.carousel.js"></script>
    <script src="js/jquery.menu-aim.js"></script>
    <script src="js/custom.js"></script>


</head>

<body>
<div id="app">
    <div class="header">
        <div class="header">
            <div class="w3ls-header">
                <div class="w3ls-header-left">
                    <p>
                        <a href="#"><img style="position: relative;left: -10px; top: -1px" src="./images/shopping.png">
                            XB全新高端购物平台
                        </a>
                    </p>
                </div>
                <div class="w3ls-header-right">
                    <ul>
                        <li class="dropdown head-dpdn">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-user" aria-hidden="true"></i>人名<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="profile.html">个人中心</a></li>
                                <li><a href="login.html">注销</a></li>
                            </ul>
                        </li>
                        <li class="dropdown head-dpdn">
                            <a href="car.html" class="dropdown-toggle"><i class="fa fa-gift" aria-hidden="true"></i>购物车</a>
                        </li>
                        <li class="dropdown head-dpdn">
                            <a href="waitPay.html" class="dropdown-toggle">
                                <i class="fa fa-credit-card-alt" aria-hidden="true"></i>待支付</a>
                        </li>
                    </ul>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="header-two">
                <div class="container">
                    <div class="header-logo">
                        <h1><a href="home.html"><span>X</span>Biao </a></h1>
                        <h6>Your stores. Your place.</h6>
                    </div>
                    <div class="header-search">
                        <form action="#" method="post" @submit.prevent>
                            <input type="search" name="Search" placeholder="Search for a Product..." required=""
                                   v-model="name">
                            <button type="submit" class="btn btn-default" aria-label="Left Align" @click="search(1)">
                                <i class="fa fa-search" aria-hidden="true"> </i>
                            </button>
                        </form>
                    </div>
                    <div class="header-cart">
                        <div class="my-account">
                            <a href="javascript:;"></a>
                        </div>
                        <div class="cart">
                            <a href="car.html">
                                <button class="w3view-cart" type="submit" name="submit" value=""><i
                                        class="fa fa-cart-arrow-down" aria-hidden="true"></i></button>
                            </a>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="header-three">
                <div class="container">
                    <ul class="nav nav-pills nav-justified">
                        <li><a href="productList.html">仙女列表</a></li>
                        <li><a href="productList.html">可爱列表</a></li>
                        <li><a href="productList.html">咔咔列表</a></li>
                        <li><a href="productList.html">哒哒列表</a></li>
                        <li><a href="productList.html">可爱列表</a></li>
                        <li><a href="productList.html">咔咔列表</a></li>
                        <li><a href="productList.html">憨憨列表</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- products -->
    <div class="products">
        <div class="container">
            <div class="col-md-12 product-w3ls-right">
                <!-- breadcrumbs -->
                <ol class="breadcrumb breadcrumb1">
                    <li><a href="home.html">Home</a></li>
                    <li class="active">可爱列表</li>
                </ol>
                <!-- //breadcrumbs -->

                <div class="products-row">
                    <div class="col-md-3 product-grids" v-for="goods in productList">
                        <div class="agile-products">
                            <div class="new-tag">
                                <h6>TOP1 <br> Hot</h6>
                            </div>
                            <a href="javascript:" @click="detail(goods.id)"><img :src="goods.pic" class="img-responsive" alt="img"></a>
                            <!--src="images/f3.png"-->
                            <!--v-model="goods.pic"-->
                            <div class="agile-product-text">
                                <h5><a href="javascript:" @click="detail(goods.id)">{{goods.name}}</a></h5>
                                <h6>￥{{goods.price}}</h6>
                                <h6>{{goods.publishRealName}}</h6>
                                <button type="submit" class="w3ls-cart pw3ls-cart">
                                    <i class="fa fa-cart-plus" aria-hidden="true"></i>查看详情
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <nav class="navbar-right" aria-label="Page navigation">
                            <ul class="pagination">
                                <li>
                                    <a href="javascript:" @click="search(currPage-1)" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <li v-for="num in totalPage"><a href="javascript:" @click="search(num)">{{num}}</a></li>

                                <li>
                                    <a href="javascript:" @click="search(currPage+1)" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div class="clearfix"></div>
                </div>

                <!-- //add-products -->
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <!--//products-->

    <!--最热商品-->
    <div class="add-products">
        <h3 class="w3ls-title">热卖商品</h3>
        <div class="container">
            <div class="add-products-row">
                <div class=" w3ls-add-grids">
                    <a href="#">
                        <img src="./images/img1.jpg">
                        <p>无敌单品<span>$20</span></p>
                        <span>Shop now <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></span>
                    </a>
                </div>
                <div class=" w3ls-add-grids">
                    <a href="#">
                        <img src="./images/img2.jpg">
                        <p>无敌单品<span>$20</span></p>
                        <span>Shop now <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></span>
                    </a>
                </div>
                <div class=" w3ls-add-grids">
                    <a href="#">
                        <img src="./images/img3.jpg">
                        <p>无敌单品<span>$20</span></p>
                        <span>Shop now <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></span>
                    </a>

                </div>
                <div class=" w3ls-add-grids">
                    <a href="#">
                        <img src="./images/img3.jpg">
                        <p>无敌单品<span>$20</span></p>
                        <span>Shop now <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></span>
                    </a></div>
            </div>
        </div>
    </div>
</div>

<div class="copy-right">
    <div class="container">
        <p>Copyright &copy; 2020.XB All rights reserved.<a target="_blank" href="#"></a></p>
    </div>
</div>
</body>
<script src="js/jquery-2.2.3.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="js/jquery.backstretch.js"></script>
<script src="js/scripts.js"></script>
<script src="js/layer.js"></script>
<script src="js/vue-2.6.11.js"></script>
<script src="js/axios-0.19.2.min.js"></script>
<script src="js/jquery-cookie-1.4.1.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            loginUser: JSON.parse(localStorage.getItem("loginUser")),
            name: "",
            productList: [],
            totalPage: 1,
            currPage: 1
        },
        methods: {
            search(page) {
                if (page <= 0) {
                    layer.msg("已经到顶啦！");
                    return;
                }
                if (page > this.totalPage) {
                    layer.msg("已经到底啦！");
                    return;
                }
                axios.post(`/goods/search/${page}`, {
                    name: this.name
                }).then((res) => {

                    if (res.data.flag) {

                        // 当前页数据
                        this.productList = res.data.data.pageResult.rows;

                        // 总页数
                        this.totalPage = res.data.data.pageResult.totalPage;

                        // 当前页
                        this.currPage = page;

                        // 搜索条件回显
                        this.name = res.data.data.name;

                    } else {

                        layer.msg(res.data.message);
                    }

                })

            },
            detail(id) {
                // 将文章id存储在啊sessionStorage中做中转操作
                sessionStorage.setItem("goodsId", id);
                location.href = "/goodsDetail.html";
            }

        },
        created() {
            this.search(1);
        }
    })
</script>

</html>